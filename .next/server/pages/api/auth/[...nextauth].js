"use strict";(()=>{var e={};e.id=748,e.ids=[748],e.modules={7096:e=>{e.exports=require("bcrypt")},3227:e=>{e.exports=require("next-auth")},7449:e=>{e.exports=require("next-auth/providers/credentials")},3598:e=>{e.exports=require("next-auth/providers/google")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},3219:e=>{e.exports=import("@auth/typeorm-adapter")},8678:e=>{e.exports=import("pg")},4828:(e,r,t)=>{t.a(e,async(e,a)=>{try{t.r(r),t.d(r,{config:()=>u,default:()=>p,routeModule:()=>d});var n=t(1802),s=t(7153),i=t(6249),o=t(8417),l=e([o]);o=(l.then?(await l)():l)[0];let p=(0,i.l)(o,"default"),u=(0,i.l)(o,"config"),d=new n.PagesAPIRouteModule({definition:{kind:s.x.PAGES_API,page:"/api/auth/[...nextauth]",pathname:"/api/auth/[...nextauth]",bundlePath:"",filename:""},userland:o});a()}catch(e){a(e)}})},3489:(e,r,t)=>{t.d(r,{Z:()=>o});let a=require("cors");var n,s=t.n(a);let i=(n=s()({methods:["GET","POST","PUT","DELETE"],origin:process.env.NEXTAUTH_URL||"http://localhost:3000",credentials:!0}),(e,r)=>new Promise((t,a)=>{n(e,r,e=>e instanceof Error?a(e):t(e))})),o=i},8417:(e,r,t)=>{t.a(e,async(e,a)=>{try{t.r(r),t.d(r,{default:()=>g});var n=t(3227),s=t.n(n),i=t(3598),o=t.n(i),l=t(7449),p=t.n(l),u=t(3219),d=t(8678),c=t(7096),h=t.n(c),m=t(3489),E=e([u,d]);[u,d]=E.then?(await E)():E;let x=new d.Pool({connectionString:process.env.DATABASE_URL}),authHandler=async(e,r)=>(await (0,m.Z)(e,r),await s()(e,r,{adapter:(0,u.TypeORMAdapter)(process.env.DATABASE_URL),providers:[o()({clientId:process.env.GOOGLE_CLIENT_ID,clientSecret:process.env.GOOGLE_CLIENT_SECRET}),p()({name:"Credentials",credentials:{email:{label:"Email",type:"text"},password:{label:"Password",type:"password"}},async authorize(e){let{email:r,password:t}=e;try{let e=await x.query("SELECT * FROM users WHERE email = $1",[r]);if(0===e.rows.length)return null;let a=e.rows[0],n=await h().compare(t,a.password);if(!n)return null;return{id:a.id.toString(),name:a.name,email:a.email}}catch(e){return console.error("Login error:",e),null}}})],pages:{signIn:"/login-page"},session:{strategy:"database"}})),g=authHandler;a()}catch(e){a(e)}})}};var r=require("../../../webpack-api-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),t=r.X(0,[702],()=>__webpack_exec__(4828));module.exports=t})();